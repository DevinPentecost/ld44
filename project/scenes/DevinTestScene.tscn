[gd_scene load_steps=10 format=2]

[ext_resource path="res://objects/Player/Player.tscn" type="PackedScene" id=1]
[ext_resource path="res://objects/PlayerCamera/PlayerCamera.tscn" type="PackedScene" id=2]
[ext_resource path="res://objects/Track/Wall.tscn" type="PackedScene" id=3]
[ext_resource path="res://objects/Track/Shoulder.tscn" type="PackedScene" id=4]
[ext_resource path="res://objects/Track/Obstacle.tscn" type="PackedScene" id=5]

[sub_resource type="GDScript" id=8]
script/source = "extends Spatial

onready var player = $Player

onready var speed_label = $PlayerSpeed
onready var health_bar = $HealthBar

# Called when the node enters the scene tree for the first time.
func _ready():
	set_process(true)

	var shoulders = [$Shoulders/Shoulder, $Shoulders/Shoulder2]
	var walls = [$Walls/Wall/Area, $Walls/Wall2/Area]
	player.connect_to_terrain_areas(shoulders, walls)

func _process(delta):
	_display_speed()
	_display_health()

func _display_speed():
	
	var text = \"F/B Speed: %s\\nL/R Speed: %s\" % [player.current_speed, player.current_turn_speed]
	speed_label.text = text
	
func _display_health():
	
	#Get the value
	var health = player.current_health
	health_bar.value = health

func _on_Player_player_died():
	#Show GAMEOVER
	$GAMEOVER.show()
	pass # Replace with function body.
"

[sub_resource type="BoxShape" id=1]
extents = Vector3( 20, 0.1, 20 )

[sub_resource type="SpatialMaterial" id=3]
albedo_color = Color( 0.168627, 0.0196078, 0.431373, 1 )

[sub_resource type="PlaneMesh" id=2]
material = SubResource( 3 )
size = Vector2( 40, 40 )

[node name="DevinTestScene" type="Spatial"]
script = SubResource( 8 )

[node name="GAMEOVER" type="Label" parent="."]
visible = false
anchor_top = 0.5
anchor_right = 1.0
anchor_bottom = 0.5
margin_top = -7.0
margin_bottom = 7.0
text = "GAME OVER"
align = 1
uppercase = true

[node name="HealthBar" type="ProgressBar" parent="."]
anchor_left = 1.0
anchor_right = 1.0
margin_left = -103.0
margin_top = 46.3291
margin_right = 1.0
margin_bottom = 60.3291

[node name="PlayerSpeed" type="Label" parent="."]
anchor_left = 1.0
anchor_right = 1.0
margin_left = -124.0
margin_bottom = 35.0

[node name="Ground" type="StaticBody" parent="."]

[node name="CollisionShape" type="CollisionShape" parent="Ground"]
shape = SubResource( 1 )

[node name="MeshInstance" type="MeshInstance" parent="Ground"]
mesh = SubResource( 2 )
material/0 = null

[node name="Player" parent="." instance=ExtResource( 1 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0 )

[node name="PlayerCamera" parent="." instance=ExtResource( 2 )]
transform = Transform( 1, 0, 0, 0, 0.906308, 0.422618, 0, -0.422618, 0.906308, 0, 7, 6.25 )

[node name="Walls" type="Spatial" parent="."]

[node name="Wall2" parent="Walls" instance=ExtResource( 3 )]
transform = Transform( -1, 0, -8.74228e-008, 0, 1, 0, 8.74228e-008, 0, -1, 10, 0, 0 )

[node name="Wall" parent="Walls" instance=ExtResource( 3 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -10, 0, 0 )

[node name="Shoulders" type="Spatial" parent="."]

[node name="Shoulder" parent="Shoulders" instance=ExtResource( 4 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -8, 0, 0 )

[node name="Shoulder2" parent="Shoulders" instance=ExtResource( 4 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 8, 0, 0 )

[node name="Obstacle" parent="." instance=ExtResource( 5 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 5, 0, 0 )

[connection signal="player_died" from="Player" to="." method="_on_Player_player_died"]
