[gd_scene load_steps=12 format=2]

[ext_resource path="res://scenes/caleb/TrackFollower.gd" type="Script" id=1]
[ext_resource path="res://scenes/caleb/FollowTrack.gd" type="Script" id=2]
[ext_resource path="res://scenes/caleb/RotateTrack.gd" type="Script" id=3]
[ext_resource path="res://scenes/caleb/Racer.gd" type="Script" id=4]

[sub_resource type="Environment" id=1]

[sub_resource type="Curve3D" id=2]
_data = {
"points": PoolVector3Array(  ),
"tilts": PoolRealArray(  )
}

[sub_resource type="SpatialMaterial" id=3]
albedo_color = Color( 0.541176, 1, 0.913725, 1 )

[sub_resource type="PlaneMesh" id=4]
material = SubResource( 3 )

[sub_resource type="CapsuleMesh" id=5]

[sub_resource type="SpatialMaterial" id=6]
albedo_color = Color( 0.113725, 0.478431, 0, 1 )

[sub_resource type="PlaneMesh" id=7]
material = SubResource( 6 )

[node name="Spatial" type="Spatial"]

[node name="Camera" type="Camera" parent="."]
transform = Transform( 1, 0, 0, 0, 0.965926, 0.258819, 0, -0.258819, 0.965926, 0, 6, 8 )
environment = SubResource( 1 )
current = true
far = 200.0

[node name="Camera2" type="Camera" parent="."]
transform = Transform( 1, 0, 0, 0, -0.0197918, 0.999804, 0, -0.999804, -0.0197918, 0, 83.0548, 11.9459 )
visible = false
environment = SubResource( 1 )
far = 200.0

[node name="TrackFollower" type="Position3D" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 25 )
script = ExtResource( 1 )

[node name="trackPath" type="Path" parent="TrackFollower"]
curve = SubResource( 2 )

[node name="PathFollow" type="PathFollow" parent="TrackFollower/trackPath"]
rotation_mode = 1

[node name="FollowTrack" type="Position3D" parent="TrackFollower"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.01, -25 )
script = ExtResource( 2 )

[node name="RotateTrack" type="Position3D" parent="TrackFollower"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.01, -25 )
script = ExtResource( 3 )

[node name="Light Sources" type="Position3D" parent="TrackFollower/RotateTrack"]

[node name="fromTop" type="DirectionalLight" parent="TrackFollower/RotateTrack/Light Sources"]
transform = Transform( 1, 0, 0, 0, 0.258819, 0.965926, 0, -0.965926, 0.258819, 0, -10, 0 )

[node name="fromBack" type="DirectionalLight" parent="TrackFollower/RotateTrack/Light Sources"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -10, 0 )
light_color = Color( 0.470588, 0, 0, 1 )

[node name="fromLeft" type="DirectionalLight" parent="TrackFollower/RotateTrack/Light Sources"]
transform = Transform( -4.37114e-008, 0, -1, 0, 1, 0, 1, 0, -4.37114e-008, 0, -10, 0 )
light_energy = 0.25

[node name="fromRight" type="DirectionalLight" parent="TrackFollower/RotateTrack/Light Sources"]
transform = Transform( -4.37114e-008, 0, 1, 0, 1, 0, -1, 0, -4.37114e-008, 0, -10, 0 )
light_energy = 0.25

[node name="Background" type="Position3D" parent="TrackFollower/RotateTrack"]
transform = Transform( 0.707107, 0, 0.707107, 0, 1, 0, -0.707107, 0, 0.707107, 0, 0, 0 )

[node name="frontPlane" type="MeshInstance" parent="TrackFollower/RotateTrack/Background"]
transform = Transform( 100, 0, 0, 0, -0.258819, -96.5926, 0, 0.965926, -25.8819, 0, 0, -95 )
mesh = SubResource( 4 )
material/0 = null

[node name="rightPlane" type="MeshInstance" parent="TrackFollower/RotateTrack/Background"]
transform = Transform( 0, -0.965926, 25.8819, -2.26267e-006, -0.258819, -96.5926, 100, -8.9407e-008, 0, 95, 0, 0 )
mesh = SubResource( 4 )
material/0 = null

[node name="leftPlane" type="MeshInstance" parent="TrackFollower/RotateTrack/Background"]
transform = Transform( 1.14441e-005, 0.965926, -25.8819, -2.26267e-006, -0.258819, -96.5926, -100, 1.78814e-007, 0, -95, 0, 0 )
mesh = SubResource( 4 )
material/0 = null

[node name="backPlane" type="MeshInstance" parent="TrackFollower/RotateTrack/Background"]
transform = Transform( 100, 0, 0, 0, -0.258819, 96.5926, 0, -0.965926, -25.8819, 0, 0, 95 )
mesh = SubResource( 4 )
material/0 = null

[node name="IgnoreTrack" type="Position3D" parent="TrackFollower"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.01, -25 )

[node name="Racer" type="MeshInstance" parent="TrackFollower/IgnoreTrack"]
mesh = SubResource( 5 )
material/0 = null
script = ExtResource( 4 )

[node name="bottomPlane" type="MeshInstance" parent="TrackFollower/IgnoreTrack"]
transform = Transform( 100, 0, 0, 0, 1, 0, 0, 0, 100, 0.0814819, -1.916, -0.0443954 )
mesh = SubResource( 7 )
material/0 = null

[connection signal="position_update" from="TrackFollower" to="TrackFollower/RotateTrack" method="_on_TrackFollower_position_update"]
[connection signal="position_update" from="TrackFollower" to="TrackFollower/FollowTrack" method="_on_TrackFollower_position_update"]
[connection signal="turning" from="TrackFollower" to="TrackFollower/IgnoreTrack/Racer" method="_on_TrackFollower_turning"]
